define(["require","lib/game-shim","lib/inheritance","lib/jquery-1.8b1","lib/underscore-min","lib/Stats","lib/Three","GameSceneTest","GameStateManager","Input"],function(a){a("lib/game-shim"),a("lib/inheritance"),a("lib/jquery-1.8b1");var b=a("lib/underscore-min"),c=a("lib/Stats"),d=a("lib/Three"),e=a("GameSceneTest"),f=a("GameStateManager"),g=a("Input"),h=function(){var a=this;this.stats=new c,this.timer=new d.Clock,this.scaleX=1,this.scaleY=1,this.gameStateManager=new f,this.start=function(b){b=b||{},this.container=$(b.container||document.body);var c=a.container.width(),f=a.container.height();a.container.html(" "),a.renderer=new d.WebGLRenderer,a.renderer.setSize(c,f),a.container.append(a.renderer.domElement),g.bind(a.container[0]),a.gameStateManager.add(new e(a)),window.addEventListener("resize",this.onResized,!1),a.setDebug(b.debug),a.mainLoop()},this.setDebug=function(b){b?($(a.stats.domElement).addClass("overlay"),a.container.append(a.stats.domElement)):$(a.stats.domElement).remove()},this.mainLoop=function(){a.stats.begin(),a.gameStateManager.current().updateAll(a.timer.getDelta()),a.gameStateManager.current().renderAll(a.renderer),a.stats.end(),requestAnimationFrame(a.mainLoop)},this.setSize=function(b,c){a.scaleX=b,a.scaleY=c,a.onResized()},this.onResized=function(){var b=a.container.width()*a.scaleX,c=a.container.height()*a.scaleY;a.renderer.setSize(b,c),a.gameStateManager.onResized(b,c)}};return this.DanmakuJS=new h,this.DanmakuJS})