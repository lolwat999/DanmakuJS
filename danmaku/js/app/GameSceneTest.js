define(["require","./GameScene","./Bullet","./Player","./Tasks","./OverlayState","./Entity","./Enemy"],function(a){var b=a("./GameScene"),c=a("./Bullet"),d=a("./Player"),e=a("./Tasks"),f=a("./OverlayState"),g=a("./Entity"),h=a("./Enemy"),i=b.extend({init:function(a,b,c){var e=this;this._super(a,b,c),this.add(new d({x:e.gameArea.width/2,y:100,image:"characters/marisa.png",scale:2.5})),this.foreground=new f(a),this.foreground.frame=new g({x:0,y:0,image:"frame.png"}),this.foreground.add(this.foreground.frame)},addEnemy:function(a){var b=this;b.frame%30||this.add(new h({x:Math.random()*b.gameArea.width,y:b.gameArea.height,xSpeed:-(Math.random()*10)+5,ySpeed:5,scale:2.5,angle:180,image:"characters/marisa.png",tasks:[j]}))},update:function(a){this._super(a),this.addEnemy(a)}}),j=function(a,b,d){if(d.frame%5||b&&b.outOfBounds())return;var e=d.gameArea,f=b?b.x:e.width/2,g=b?b.y:e.height/2,h=this.angle||0;d.add(new c({x:f,y:g,angle:h,life:500,image:"bullets/arrow.png",color:Math.floor(Math.random()*16777216),owner:b,tasks:[function(a,b,c){b.angle+=.25}]})),this.angle=(h+16)%360};return i})