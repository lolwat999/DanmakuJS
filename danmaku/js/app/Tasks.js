define(["require","lib/Three"],function(a){var b=a("lib/Three"),c=Class.extend({init:function(a){var b=this;this.time=0,this.life=a.life||Infinity,this._tasks=[],this.alive=!0,a._tasks&&(a.tasks=a._tasks),a.tasks&&a.tasks.forEach(function(a){b.add(a)})},add:function(a){typeof a=="function"&&(a={update:a}),a.tasks=this,a.time=0,this._tasks.push(a)},remove:function(a){this._tasks.splice(this._tasks.indexOf(a),1)},clear:function(){this._tasks=[]},getAll:function(){return this._tasks},update:function(a,b){if(this.alive&&(!b||b.alive)){var c=a/.016666,d=this._tasks;if(d&&d.length)for(var e=0,f=d.length;e<f;++e){var g=d[e];g.update(a,b,b?b.state:this.state),g.time+=c}this.life!==Infinity&&(this.time+=c,this.time>this.life&&(this.alive=!1))}}});return c})